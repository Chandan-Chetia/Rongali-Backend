<% layout('admin/layout') -%>

<h2 class="mb-4">Orders</h2>

<div class="card">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Order ID</th>
            <th>Customer</th>
            <th>Date</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% orders.forEach(order => { %>
            <tr>
              <td>#<%= order._id.toString().slice(-6) %></td>
              <td><%= order.user.name %><br><small><%= order.user.email %></small></td>
              <td><%= order.createdAt.toLocaleDateString() %></td>
              <td>â‚¹<%= order.total.toFixed(2) %></td>
              <td>
                <span class="badge bg-<%= order.status === 'completed' ? 'success' : order.status === 'cancelled' ? 'danger' : 'warning' %>">
                  <%= order.status %>
                </span>
              </td>
              <td>
                <a href="/admin/orders/<%= order._id %>" class="btn btn-sm btn-outline-primary">
                  <i class="bi bi-eye"></i> View
                </a>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>
</div>